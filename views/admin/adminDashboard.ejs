<%-include('../layouts/adminHeader.ejs')%>

<div class="container mt-5" >
  <a class="btn btn-primary addNewUser " href="/admin/new-user">Add new User</a>
  <br>

  <h1>Dashboard</h1>

  <form class="mt-3 col-md-6" >
    <div class="input-group">
      <input type="text" class="form-control" placeholder="Search User name, email, mobile" name="search">
      <button type="submit" class="btn btn-primary">Search</button>
    </div>
  </form>

  <table class="table mt-3">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Mobile</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% 
        if(users.length > 0){
          for(let i=0; i < users.length; i++ ){
            %>
            <tr>
              <td><%- users[i].firstName %></td>
              <td><%- users[i].email %></td>
              <td><%- users[i].phoneNumber %></td>
              <td>
                <% if(users[i].is_verified === false){ %>
                  <p>Not Verified</p>
                <% } else { %>
                  <p>Verified</p>
                <% } %>
              </td>
              <td>
                <% if (!users[i].is_blocked) { %>
                  <a href="/admin/Block-user/<%= users[i]._id %>"
                     onclick="return confirm('Do you want to block <%= users[i].firstName %> ?')"
                     class="btn btn-danger">Block</a>
                <% } else { %>
                  <a href="/admin/Unblock-user/<%= users[i]._id %>"
                     class="btn btn-success">Unblock</a>
                <% } %>
              </td>
            </tr>
            <%
          }
        } else {
          %>
          <tr>
            <td colspan="5"> Users Not Found</td>
          </tr>
          <%
        }
      %>
    </tbody>
  </table>
  <br>
  <div class="mt-3">
    <%
      for(let j = 1; j <= totalPages; j++){
        %>
        <a href="?page=<%= j %>" class="btn btn-secondary <%= j===currentPage ? 'active' : '' %>"><%= j %></a>
        <%
      }
    %>
  </div>
  <br><br>
  <a href="/admin/home" class="btn btn-secondary">Go to Home</a>
</div>
<br><br><br>
<%- include('../layouts/adminFooter.ejs') %>
